<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
  <head>
    <meta charset="utf-8"/>
    <meta name="description" content="Component view of the Thindeck architecture, including key UML diagrams and views" />
    <meta name="keywords" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" type="image/png" href="//img.thindeck.com/logo-128x128.png">
    <link rel="shortcut icon" href="//img.thindeck.com/logo-128x128.png" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://doc.thindeck.com/rss.xml"/>
    <link rel="author" href="//plus.google.com/u/0/114792568016408327418?rel=author" />
    <link rel="stylesheet" href="/css/layout.css?"/>
    <link rel="canonical" href="//doc.thindeck.com/component-view.html" />
    <title>Component View</title>
  </head>
  <body>
    <div class="wrapper">
      <header class="header">
        <p>
          <a href="/">
            <img src="//img.thindeck.com/logo.svg" class="logo" alt="logo"/>
          </a>
        </p>
        <p>
          <a href="http://www.teamed.io">
            <img src="//img.teamed.io/btn.svg" alt="made by teamed.io"/>
          </a>
          <a href="http://www.rultor.com/p/yegor256/thindeck">
            <img src="//www.rultor.com/b/yegor256/thinkdeck" alt="devops by rultor.com"/>
          </a>
        </p>
        <p>
          0.4.1 on 24 June 2014
        </p>
        <p>
          Author(s): Yegor Bugayenko
        </p>
      </header>
      <h1>Component View</h1>
      <div role="main"><p>The following technical concerns were taken into account
during the design of Thindeck:</p>

<ul>
<li><p><strong>Server resources are unreliable</strong>.
We can&#39;t guarantee that any of our
servers are stable. Moreover, we should be able to work with
commodity hardware, at the same time delivering high-availability
to our end-users.</p></li>
<li><p><strong>Deployment is a complex multi-step process</strong>.
We want to give our users an ability to deploy in one click.
But we need to remember that a proper deployment of a complex
web application is a multi-step process, involving starting
new web containers, checking their health status, destroying
old containers, re-configuring load balancers, etc. The process
involves multiple steps and multiple server resources (nodes,
load balancers, etc).</p></li>
<li><p><strong>Transparent logging is critical</strong>.
It is very important to enable transparent logging of all
processes, including deployment, start/stop of web app,
continuous running of the app, etc. Since every application involves
a number of hardware resources, we should invent a mechanism
of logs aggregation or at least making them all visible.</p></li>
</ul>

<p>There is a number of technical concepts (full list of them
is in <a href="/apidocs-0.4.1/com/thindeck/api/index.html">JavaDoc</a>):</p>

<ul>
<li><p><a href="/apidocs-0.4.1/com/thindeck/api/Repo.html"><strong>Repository</strong></a> is
an entity that knows where the sources are and continuously deploys them.</p></li>
<li><p><a href="/apidocs-0.4.1/com/thindeck/api/Task.html"><strong>Task</strong></a> is
a collection of steps to be executed one-by-one
in order to change the situation in a repository (for example, to deploy it).</p></li>
<li><p><a href="/apidocs-0.4.1/com/thindeck/api/Txn.html"><strong>Txn</strong></a> (transaction) is
a multi-step process of deployment a repository.</p></li>
</ul>

<p>The system consists of the following components:</p>

<ul>
<li><p><strong>Cockpit</strong> is a Java web app that communicates with
end-users and API clients. The Cockpit registers repositories,
starts tasks and shows task logs. Besides that, the Cockpit,
activates transactions regularly, every minute.</p></li>
<li><p><strong>Tank</strong> is a server node (preferrably hosted by Amazon Web Services
or a similar could hosting) with an open SSH and pre-installed Docker
service. There are many tanks in the system and their amount
is growing and decreasing dynamically. Tanks host Docker
containers. They don&#39;t have any active components inside them. The
entire control is happening from the Cockpit, through SSH.</p></li>
<li><p><strong>Load Balancer</strong> is a server node with an installed load balancing
software (like Apache HTTP Server or Nginx) and an open SSH. The
Cockpit configures the Load Balancer on demand, through SSH. The Load
Balancer by itself is a passive component. It can&#39;t configure anything
by itself and is not connected to the Board or the Meter.
There should be a number of Load Balancers in the system, fully
duplicating each other.</p></li>
<li><p><strong>Board</strong> is a persistence layer (preferrably implemented in AWS DynamoDB).
The Board stores the data that the Cockpit is manipulating.
The Board is out of our technical scope and is provided to us
as a cloud web service, through RESTful API.</p></li>
<li><p><strong>Meter</strong> is a usage tracking service, that helps us to record
runtime information about traffic and CPU usage by our repositories
and Docker containers.
The Meter is out of our technical scope and is provided to us
as a cloud web service, through RESTful API.</p></li>
</ul>
</div>
      <footer class="footer">
        <p>
          <a href="/apidocs-0.4.1">JavaDoc</a>
          |
          <a href="/cobertura">Code Coverage</a>
          |
          <a href="/team-list.html">Team</a>
        </p>
        <p>
          &copy; <span itemprop="author">thindeck.com</span>, 2014
        </p>
      </footer>
    </div>
  </body>
</html>
